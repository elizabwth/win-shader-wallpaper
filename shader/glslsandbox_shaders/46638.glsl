{"code": "/*\n * Original shader from: https://www.shadertoy.com/view/4ddfDr\n */\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n// glslsandbox uniforms\nuniform float time;\nuniform vec2 resolution;\n\n// shadertoy globals\nfloat iTime;\nvec3  iResolution;\n\n// --------[ Original ShaderToy begins here ]---------- //\n// @lsdlive\n\n// Live-coding session I did for a rap music set last week end.\n// This is the part 1 of the shader session, this was prepared before the show.\n// The code below is almost the code that was on stage at the mid-show,\n// ported from atom-veda to shadertoy.\n\n// Several code snippets you will find, as it or revisited, in this shader:\n// * aiekick's phantom mode - https://www.shadertoy.com/view/MtScWW\n// * balkhan's glow - https://www.shadertoy.com/view/4t2yW1\n// * lj's short octahedron formula - \"float od = dot(q, normalize(sign(q))) - .15;\"\n// * iq & mercury's hglib sdf functions\n// http://iquilezles.org/www/articles/distfunctions/distfunctions.htm\n// http://mercury.sexy/hg_sdf/\n// * iq's signed cross sc() - http://iquilezles.org/www/articles/menger/menger.htm\n\n// Thanks to shadertoy community & shader showdown paris, making this possible.\n\n// This is under CC-BY-NC-SA (shadertoy default licence)\n\n\nmat2 r2d(float a) {\n\tfloat c = cos(a), s = sin(a);\n\treturn mat2(c, s, -s, c);\n}\n\nfloat sc(vec3 p, float d) {\n\tp = abs(p);\n\tp = max(p, p.yzx);\n\treturn min(p.x, min(p.y, p.z)) - d;\n}\n\nfloat rep(float p, float d) {\n\treturn mod(p - d*.5, d) - d*.5;\n}\n\nvec3 rep(vec3 p, float d) {\n\treturn mod(p - d*.5, d) - d*.5;\n}\n\nfloat dt = 0.;\nfloat g = 0.;\nfloat de(vec3 p) {\n\n\tvec3 q = p;\n\tfloat t = iTime*8.6*2.;\n\tfloat s = t*.1 + sin(t)*.1;\n\tq.xy += vec2(cos(iTime)*sin(iTime)*.3, sin(iTime)*.3);\n\tq.z -= dt + sin(iTime);\n\tq.xz *= r2d(iTime);\n\tq.xy *= r2d(iTime);\n\tfloat od = dot(q, normalize(sign(q))) - .15;\n\n\tfloat pl = p.y + .6;\n\n\tq = p;\n\t//q.y+=.2;\n\tq.x += sin(q.z + iTime)*.6;\n\tq.y += cos(q.z + iTime*2.)*.6;\n\tfloat cyl = length(q.xy) - .02;\n\n\tq = p;\n\tq += iTime*.2;\n\tq.xy += sin(q.z*.4)*2.;\n\tq = rep(q, 1.);\n\tfloat s1 = length(q) - .002 + sin(iTime*30.)*.002;\n\n\n\tp.z = rep(p.z, 2.);\n\n\tfloat sc2 = sc(p, .4);\n\n\tp.x = abs(p.x) - 2.;\n\tp.xy *= r2d(3.14*.25);\n\tfloat sc1 = sc(p, .3);\n\n\tfloat d = min(sc1, pl);\n\td = max(d, -sc2);\n\td = min(d, od);\n\td = min(d, cyl);\n\td = min(d, s1);\n\n\tg += .01 / (.01 + d*d);\n\treturn d;\n}\n\nvoid mainImage(out vec4 fragColor, in vec2 fragCoord) {\n\tvec2 uv = fragCoord / iResolution.xy - .5;\n\tuv.x *= iResolution.x / iResolution.y;\n\n\tdt = iTime*2.;\n\n\tvec3 ro = vec3(0, 0, -3. + dt);\n\tvec3 ta = vec3(0, 0, 0. + dt);\n\tvec3 fwd = normalize(ta - ro);\n\tvec3 left = cross(vec3(0, 1, 0), fwd);\n\tvec3 up = cross(fwd, left);\n\tvec3 rd = normalize(fwd + left*uv.x + up*uv.y);\n\n\t//rd.xy *= r2d(sin(iTime*.5)*.3);\n\n\tvec3 p;\n\tfloat t = 0., ri;\n\tfor (float i = 0.; i < 1.; i += .01) {\n\t\tri = i;\n\t\tp = ro + rd*t;\n\t\tfloat d = de(p);\n\t\t//if (d < .001) break;\n\t\td = max(abs(d), .0002);\n\t\tt += d*.3;\n\t}\n\n\tvec3 c = mix(vec3(.6, .3, .3), vec3(0), abs(p.x*p.y) + ri);\n\tc += g*.01;\n\tfragColor = vec4(c, 1);\n}\n// --------[ Original ShaderToy ends here ]---------- //\n\nvoid main(void)\n{\n    iTime = time;\n    iResolution = vec3(resolution, 0.0);\n\n    mainImage(gl_FragColor, gl_FragCoord.xy);\n}", "user": "fb7c21a", "parent": null, "id": "46638.0"}