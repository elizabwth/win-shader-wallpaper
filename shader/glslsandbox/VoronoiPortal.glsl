{"code": "// Voronoi Portal\n// Voronoi Variation + Fractional Brownian Motion\n// By: Brandon Fogerty\n// bfogerty at gmail dot com\n// xdpixel.com\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\nuniform float time;\nuniform vec2 mouse;\nuniform vec2 resolution;\n\nvec2 hash( vec2 p )\n{\n     mat2 m = mat2( 15.32, 83.43,\n                     117.38, 289.59 );\n    \n     return fract( sin( m * p) * 46783.289 );\n}\n\nfloat voronoi( vec2 p )\n{\n     vec2 g = floor( p );\n     vec2 f = fract( p );\n    \n     float distanceFromPointToCloestFeaturePoint = 1.0;\n     for( int y = -1; y <= 1; ++y )\n     {\n          for( int x = -1; x <= 1; ++x )\n          {\n               vec2 latticePoint = vec2( x, y );\n               float h = distance( latticePoint + hash( g + latticePoint), f );\n\t\t  \n\t\tdistanceFromPointToCloestFeaturePoint = min( distanceFromPointToCloestFeaturePoint, h ); \n          }\n     }\n    \n     return 1.0 - sin(distanceFromPointToCloestFeaturePoint);\n}\n\nfloat texture(vec2 uv )\n{\n\tfloat t = voronoi( uv * 8.0 + vec2(time,time) );\n    \tt *= 1.0-length(uv * 2.0);\n\t\n\treturn t;\n}\n\nfloat fbm( vec2 uv )\n{\n\tfloat sum = 0.00;\n\tfloat amp = 1.0;\n\t\n\tfor( int i = 0; i < 4; ++i )\n\t{\n\t\tsum += texture( uv ) * amp;\n\t\tuv += uv;\n\t\tamp *= 0.8;\n\t}\n\t\n\treturn sum;\n}\n\nvoid main( void )\n{\n    vec2 uv = ( gl_FragCoord.xy / resolution.xy ) * 2.0 - 1.0;\n    uv.x *= resolution.x / resolution.y;\n\n    float t = pow( fbm( uv * 0.3 ), 2.0);\n\t\n    gl_FragColor = vec4( vec3( t * 2.0, t * 4.0, t * 8.0 ), 1.0 );\n\n}", "user": "d7fbe8b", "parent": "/e#27333.0", "id": "27339.3"}